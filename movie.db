CREATE DATABASE movie_db;
USE movie_db;

-- Users
CREATE TABLE Users (
    UserID INT AUTO_INCREMENT PRIMARY KEY,
    Name VARCHAR(100),
    Email VARCHAR(100) UNIQUE,
    PasswordHash VARCHAR(255),
    Role ENUM('user', 'admin') DEFAULT 'user'
);

-- Movies
CREATE TABLE Movies (
    MovieID INT AUTO_INCREMENT PRIMARY KEY,
    Title VARCHAR(100),
    Description TEXT,
    Duration INT, -- in minutes
    Language VARCHAR(50)
);

-- Showtimes
CREATE TABLE Showtimes (
    ShowtimeID INT AUTO_INCREMENT PRIMARY KEY,
    MovieID INT,
    ShowDate DATE,
    ShowTime TIME,
    ScreenNumber INT,
    FOREIGN KEY (MovieID) REFERENCES Movies(MovieID)
);

-- Bookings
CREATE TABLE Bookings (
    BookingID INT AUTO_INCREMENT PRIMARY KEY,
    ShowtimeID INT,
    UserID INT,
    NumTickets INT,
    BookingTime TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (ShowtimeID) REFERENCES Showtimes(ShowtimeID),
    FOREIGN KEY (UserID) REFERENCES Users(UserID)
);
